<!DOCTYPE html>

<html>
    
    <head>
        
        <title>Escape the Ship</title>
        
        <link href="css/layoutMaintenanceCargo.css" rel="stylesheet" type="text/css" />
        
        <script type="text/javascript">
        
            window.addEventListener('load', function() { te = setInterval(countDown, 1000);});
            var timer = 0;
            var te;
            var countContrast = 0;
            var countFontSize = 0;
            
            var numbersEntered = 0;
            var code = "2813";
            var enteredCode = "";
            
            var unlock = 0;
            
            var keypadOutput = 0;
            
            var keypadEnter = new Audio();
            keypadEnter.src = "sound/beep.mp3";
            
            var keypadCorrect = new Audio();
            keypadCorrect.src = "sound/correct.mp3";
            
            var keypadWrong = new Audio();
            keypadWrong.src = "sound/incorrect.mp3";
            
            var name = sessionStorage.getItem('fName');
            var timeTaken = 0;
            var level = 4;
            var name = sessionStorage.getItem('transferName');

            function initial() {
                
                recieve();
                initialOutput();
                setSize();
                setContrast();
                
                setTimeout(timerHint, 20000);
                
            }    
            
            function timerHint() {
                
                if(unlock > 0) {
                    
                    document.getElementById("outputText").innerHTML += "<span class = 'player'><br><br>[" + name + "]: I should probably head down that hallway.</span>"; 
                    
                } else {
                    
                    document.getElementById("outputText").innerHTML += "<span class = 'player'><br><br>[" + name + "]: There must be something, somewhere, to give me a clue...</span>"; 
                    
                }
                
               
                
            }   
            
            function recieve() {
                
                
                countContrast = sessionStorage.getItem('transferContrast');

                countFontSize = sessionStorage.getItem('transferSize');
                
                timer = sessionStorage.getItem('timeLeft');
                
                
                
                
            }
                    
            function initialOutput() {
                
                
                
                document.getElementById("outputText").innerHTML += "<span class = 'player'>[" + name + "]: A dingy storeroom - Hopefully it won't be my grave... </span>";
                
                 

                

            }
            
            function countDown() {
                
                if(timer > 0) {

                    document.getElementById('timeLeft').innerHTML = timer;
                    timer--;
                    timeTaken++;

            
                    
                } else {
                    
                    var PageId = level;
                    
                    sessionStorage.setItem('PageId', PageId);
                    
                    var transferContrast = countContrast;
                
                    sessionStorage.setItem('transferContrast', transferContrast);
                
                    var transferSize = countFontSize;
                
                    sessionStorage.setItem('transferSize', transferSize);
                    

                    
                    window.open('GameSummaryLose.html', '_self'); 
                    
                    
                }
                 
             }    

            function changeColour() {
                    
            
            countContrast++;  
                
            
             if(countContrast % 2 === 0) {
                    
            document.getElementById("head").style.color = "aqua";
            document.getElementById("accessibility").style.color = "aqua";
            document.getElementById("output").style.color = "aqua";
            document.getElementById("audio").style.color = "aqua";
            document.getElementById("timer").style.color = "aqua";
            document.getElementById("buttonContrast").style.color = "aqua";
            document.getElementById("buttonFont").style.color = "aqua";
                
                
                
                    
                    
            } else if (countContrast % 2 === 1) {
                           
            document.getElementById("head").style.color = "yellow";
            document.getElementById("accessibility").style.color = "yellow";
            document.getElementById("output").style.color = "yellow";
            document.getElementById("audio").style.color = "yellow";
            document.getElementById("timer").style.color = "yellow";
            document.getElementById("buttonContrast").style.color = "yellow";
            document.getElementById("buttonFont").style.color = "yellow";    
                
               
             
                           
                }
            
            
                  
            }
            
            function changeFontSize() {
                    
            
            countFontSize++;  
                
            
             if(countFontSize % 2 === 0) {
                    
            document.getElementById("head").style.fontSize = "initial";
            document.getElementById("accessibility").style.fontSize = "initial";
            document.getElementById("output").style.fontSize = "initial";
            document.getElementById("audio").style.fontSize = "initial";
            document.getElementById("timer").style.fontSize = "initial";
            document.getElementsByTagName("button").style.fontSize = "initial";
                
                
                
                    
                    
            } else if (countFontSize % 2 === 1) {
                           
            document.getElementById("head").style.fontSize = "x-large";
            document.getElementById("accessibility").style.fontSize = "x-large";
            document.getElementById("output").style.fontSize = "x-large";
            document.getElementById("audio").style.fontSize = "x-large";
            document.getElementById("timer").style.fontSize = "x-large";
                
                
               
             
                           
                }
            
            
                  
            }
            
            function send() {
                
                var transferContrast = countContrast;
                
                sessionStorage.setItem('transferContrast', transferContrast);
                
                var transferSize = countFontSize;
                
                sessionStorage.setItem('transferSize', transferSize);
                
                var transferTime = timer;
                
                sessionStorage.setItem('timeLeft', transferTime);
                
                var timeTakenCargo = timeTaken;
                
                sessionStorage.setItem('timeTakenCargo', timeTakenCargo)
                
                
                
                window.open('Residential.html', '_self'); 
 
            }
             
            function setSize() {

            if (countFontSize % 2 === 1) {
                           
            document.getElementById("head").style.fontSize = "x-large";
            document.getElementById("accessibility").style.fontSize = "x-large";
            document.getElementById("output").style.fontSize = "x-large";
            document.getElementById("audio").style.fontSize = "x-large";
            document.getElementById("timer").style.fontSize = "x-large";
     
            }
                
            }
            
            function setContrast() {

                
            if(countContrast % 2 === 1) {
                    
            document.getElementById("head").style.color = "yellow";
            document.getElementById("accessibility").style.color = "yellow";
            document.getElementById("output").style.color = "yellow";
            document.getElementById("audio").style.color = "yellow";
            document.getElementById("timer").style.color = "yellow";
            document.getElementById("buttonContrast").style.color = "yellow";
            document.getElementById("buttonFont").style.color = "yellow";
                
      
            }
            
            }
            
            function keypad() {
                
                if(keypadOutput < 1) {
                    
                document.getElementById("outputText").innerHTML += '<span class = "system"><br><br>[System]: A standard numeric keypad, - most likely used to unlock that door.</span>'; 
                document.getElementById("outputText").innerHTML += '<span class = "system"><br><br>[System]: Attempts Remaining: 3</span>';
                    keypadOutput++;
                    
                } else {
                    
                    
                }
                
                document.getElementById("cargo").useMap = "#keypad";
                var image = document.getElementById('cargo');
                image.src = 'images/keypad.png';
                
                
                
            }
            
            

            function returnStore() {
                
                document.getElementById("cargo").useMap = "#cargo";
                var image = document.getElementById('cargo');
                image.src = 'images/store.png';
                
            }
            
            function showCode() {
                
                
                var image = document.getElementById('cargo');
                image.src = 'images/storeCode.png'; 
                
            }
            
            function hideCode() {
                
                var image = document.getElementById('cargo');
                image.src = 'images/store.png'; 
                
            }
            
            function enteredCheck() {
                
                if(numbersEntered % 4 == 0) {
                    
                    codeCheck();
                    
                }
                
            }
            
            function reset() {
                
                enteredCode = "";
                
            }
            
            function codeCheck() {
                
                if(enteredCode == code) {
                    
                    document.getElementById("outputText").innerHTML += '<span class = "system"><br><br>[System]: Door Unlocked!</span>';
                    
                    document.getElementById("cargo").useMap = "#open";
                    var image = document.getElementById('cargo');
                    image.src = 'images/storeOpen.png';
                    
                    unlock++;
                    
                    keypadCorrect.play();
                    
                } else if (numbersEntered <= 4) {
                
                keypadWrong.play();
                    
                reset();
                    
                document.getElementById("outputText").innerHTML += '<span class = "system"><br><br>[System]: Attempts Remaining: 2</span>';
                    
                } else if (numbersEntered <= 8) {
                
                keypadWrong.play();
                    
                reset();
                    
                document.getElementById("outputText").innerHTML += '<span class = "system"><br><br>[System]: Attempts Remaining: 1</span>';

                } else if (numbersEntered <= 12 ){
                
                var PageId = level;
                    
                    sessionStorage.setItem('PageId', PageId);
                    
                    var transferContrast = countContrast;
                
                    sessionStorage.setItem('transferContrast', transferContrast);
                
                    var transferSize = countFontSize;
                
                    sessionStorage.setItem('transferSize', transferSize);
                    

                    
                    window.open('GameSummaryLoseKeypad.html', '_self'); 
                
            }
                
                
            }
            
            
            function enter0() {
                
                
                enteredCode += "0";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter1() {
                
                enteredCode += "1";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter2() {
                
                enteredCode += "2";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter3() {
                
                enteredCode += "3";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter4() {
                
                enteredCode += "4";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter5() {
                
                enteredCode += "5";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter6() {
                
                enteredCode += "6";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter7() {
                
                enteredCode += "7";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter8() {
                
                enteredCode += "8";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            
            function enter9() {
                
                enteredCode += "9";
                numbersEntered++;
                keypadEnter.play();
                enteredCheck();
                
            }
            

            
            
            
            
        </script>

    </head>

        <body onload="initial()">
        
            <div id="head">
            <h1>Level 4 - Storeroom</h1>
        </div>
        
                <div id="wrapper">

                    <div class="row">

                        <div id="game">
                    
                        <img id ="cargo" src="images/store.png" alt="long narrow storeroom with a keypad locked door at the end - a clue is on the floor in the form of a piece of paper" usemap="#cargo">

                            <map name="cargo">   

                                <area shape="rect" coords="245,200,325,320" onclick="keypad()">
                                
                                <area shape="rect" coords="160,460,205,505" onmouseover="showCode()" onmouseout="hideCode()">
                                
                        
                            </map> 
                            
                            <map name="keypad">   
                                
                                

                                <area shape="rect" coords="000,000,210,110" onclick="returnStore()">
                                
                                
                                <area id = "one" shape="rect" coords="300,100,400,200" onclick="enter1()">
                                
                                <area id = "two" shape="rect" coords="400,100,500,200" onclick="enter2()">
                                
                                <area id = "three" shape="rect" coords="500,100,600,200" onclick="enter3()">
                                
                                
                                <area id = "four" shape="rect" coords="300,200,400,300" onclick="enter4()">
                                
                                <area id = "five" shape="rect" coords="400,200,500,300" onclick="enter5()">
                                
                                <area id = "six" shape="rect" coords="500,200,600,300" onclick="enter6()">
                                
                                
                                <area id = "seven" shape="rect" coords="300,300,400,400" onclick="enter7()">
                                
                                <area id = "eight" shape="rect" coords="400,300,500,400" onclick="enter8()">
                                
                                <area id = "nine" shape="rect" coords="500,300,600,400" onclick="enter9()">
                                
                                
                                
                                
                                <area id = "zero" shape="rect" coords="400,400,500,500" onclick="enter0()">
                                
                                
                                
                                
                        
                            </map> 
                            
                            <map name="open">
                            
                            <area shape="rect" coords="245,200,325,320" onclick="send()">
                            
                            
                            
                            </map>
                    

                    </div>
                        
                    <div id = "timer">
                    
                        <h2>Time Remaining: <span id = "timeLeft"><i>Calculating...</i></span></h2>
                         
                    </div>

                    <div id = "audio">
                    
                        <h2>Sound Effects:</h2>
                        
                         <figcaption>General Alarm</figcaption>
                        
                        <audio controls loop>   
                        
                            <source src="sound/alarm.mp3">
                        
                            Your browser does not support the audio element.
                        
                        </audio> 
                        
                        <figcaption>Ambience</figcaption>
                        
                        <audio controls loop>   
                        
                            <source src="sound/StoreAmbience.mp3">
                        
                            Your browser does not support the audio element.
                        
                        </audio>    
                    
                    

                    </div>
                
                    </div>

                    <div class="row">
 
                        <div id = "output">
                       
                        <p id="outputText"></p>
                        
                    
                    </div>

                        <div id = "accessibility" >
                    
                    <h2>Accessibility Options:</h2>
                    
                        <button id = "buttonContrast" onclick="changeColour()">Toggle High Contrast</button>
                    
                        <button id = "buttonFont" onclick="changeFontSize()">Toggle Font Size</button>


                    </div>

                    </div>

                </div>
        
        </body>
    
</html>